<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√âditeur d'articles - Le Scribouill'art</title>
    <meta name="theme-color" content="#2f2e3a">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="icon" href="assets/icons/icon-192.png" type="image/png">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
    <link rel="stylesheet" href="style.css">
</head>
<body class="editor-page">
    <a href="#main-content" class="skip-link">Aller au contenu principal</a>
    <header class="header">
        <div class="container">
            <a href="../index.html" style="text-decoration: none; color: inherit;">
                <h1 class="logo">Le Scribouill'art</h1>
            </a>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <p class="tagline" style="margin-bottom: 0;">√âditeur d'articles</p>
                <button class="dark-mode-toggle" id="darkModeToggle" title="Basculer en mode nuit">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="moon-icon">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sun-icon" style="display: none;">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <main class="main" id="main-content">
        <!-- Barre sup√©rieure avec toolbar int√©gr√©e -->
        <div class="top-bar">
            <!-- Lecteur YouTube compact -->
            <div class="top-bar-youtube">
                <div class="top-bar-youtube-header">
                    <span>Musique</span>
                    <button class="youtube-toggle" id="youtubeToggle" title="R√©duire/Agrandir">‚àí</button>
                </div>
                <div class="top-bar-youtube-content" id="youtubeContent">
                    <!-- Conteneur cach√© pour l'API YouTube -->
                    <div id="ytApiContainer" style="position:absolute;width:1px;height:1px;overflow:hidden;opacity:0;pointer-events:none;"></div>
                    <!-- Lecteur custom style SoundCloud -->
                    <div class="sc-player" id="scPlayer">
                        <button class="sc-play-btn" id="scPlayBtn" title="Lecture / Pause" aria-label="Lecture / Pause">
                            <svg class="sc-icon-play" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M8 5v14l11-7z"/></svg>
                            <svg class="sc-icon-pause" viewBox="0 0 24 24" fill="currentColor" width="20" height="20" style="display:none"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                        </button>
                        <div class="sc-info">
                            <span class="sc-title">Lofi Hip Hop Radio</span>
                            <div class="sc-wave">
                                <span class="sc-live-badge">‚óè LIVE</span>
                                <div class="sc-bars" id="scBars">
                                    <span></span><span></span><span></span><span></span><span></span><span></span>
                                </div>
                            </div>
                        </div>
                        <div class="sc-right">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14" style="flex-shrink:0;opacity:0.6"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>
                            <input type="range" class="sc-volume" id="scVolume" min="0" max="100" value="80" title="Volume">
                        </div>
                    </div>
                </div>
            </div>
            <!-- Boutons d'action -->
            <div class="top-bar-actions">
                <button class="wp-button sidebar-toggle-btn" id="sidebarToggleBtn" title="Afficher/masquer les articles">Articles</button>
                <button class="wp-button" id="loadBtn">Charger</button>
                <button class="wp-button danger" id="clearBtn">Effacer</button>
                <button class="wp-button primary" id="saveBtn">Enregistrer</button>
            </div>
        </div>

        <div class="editor-container" id="editorContainer">
            <!-- Barre lat√©rale des articles -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <h2 class="sidebar-title">Mes articles</h2>
                    <button class="new-article-btn" id="newArticleBtn" title="Nouvel article">+</button>
                </div>
                <div class="articles-list" id="articlesList">
                    <div class="no-articles">Aucun article sauvegard√©</div>
                </div>
            </aside>

            <!-- Zone principale de l'√©diteur -->
            <div class="editor-main">
                <div class="editor-wrapper">
                    <!-- Informations de l'article -->
                    <div class="article-info">
                        <input 
                            type="text" 
                            id="articleSubject" 
                            class="article-subject" 
                            placeholder="Ajouter un titre"
                            maxlength="100"
                        >
                    </div>

                    <!-- Barre d'outils -->
                    <div class="toolbar editor-toolbar">
                        <select class="toolbar-select" id="formatSelect">
                            <option value="p">Paragraphe</option>
                            <option value="h1">Titre 1</option>
                            <option value="h2">Titre 2</option>
                            <option value="h3">Titre 3</option>
                            <option value="h4">Titre 4</option>
                            <option value="h5">Titre 5</option>
                            <option value="h6">Titre 6</option>
                            <option value="blockquote">Citation</option>
                            <option value="pre">Code</option>
                        </select>
                        <div class="toolbar-separator"></div>
                        <button class="toolbar-btn" data-command="bold" title="Gras (Ctrl+B)"><strong>B</strong></button>
                        <button class="toolbar-btn" data-command="italic" title="Italique (Ctrl+I)"><em>I</em></button>
                        <button class="toolbar-btn" data-command="underline" title="Soulign√© (Ctrl+U)"><u>U</u></button>
                        <button class="toolbar-btn" data-command="strikeThrough" title="Barr√©"><s>S</s></button>
                        <div class="toolbar-separator"></div>
                        <div class="color-picker-wrapper">
                            <button class="toolbar-btn" title="Couleur du texte" onclick="document.getElementById('textColor').click()">A</button>
                            <input type="color" id="textColor" class="color-input">
                        </div>
                        <div class="color-picker-wrapper">
                            <button class="toolbar-btn" title="Couleur de fond" onclick="document.getElementById('bgColor').click()">üé®</button>
                            <input type="color" id="bgColor" class="color-input">
                        </div>
                        <div class="toolbar-separator"></div>
                        <button class="toolbar-btn" data-command="insertUnorderedList" title="Liste √† puces">‚Ä¢</button>
                        <button class="toolbar-btn" data-command="insertOrderedList" title="Liste num√©rot√©e">1.</button>
                        <button class="toolbar-btn" data-command="outdent" title="R√©duire le retrait">‚óÅ</button>
                        <button class="toolbar-btn" data-command="indent" title="Augmenter le retrait">‚ñ∑</button>
                        <div class="toolbar-separator"></div>
                        <button class="toolbar-btn" data-command="justifyLeft" title="Aligner √† gauche">‚¨Ö</button>
                        <button class="toolbar-btn" data-command="justifyCenter" title="Centrer">‚Üî</button>
                        <button class="toolbar-btn" data-command="justifyRight" title="Aligner √† droite">‚û°</button>
                        <button class="toolbar-btn" data-command="justifyFull" title="Justifier">‚¨å</button>
                        <div class="toolbar-separator"></div>
                        <button class="toolbar-btn" id="linkBtn" title="Ins√©rer un lien">üîó</button>
                        <button class="toolbar-btn" id="unlinkBtn" data-command="unlink" title="Supprimer le lien">üîì</button>
                        <button class="toolbar-btn" id="imageBtn" title="Ins√©rer une image">üñºÔ∏è</button>
                        <div class="toolbar-separator"></div>
                        <button class="toolbar-btn" data-command="undo" title="Annuler (Ctrl+Z)">‚Ü∂</button>
                        <button class="toolbar-btn" data-command="redo" title="R√©tablir (Ctrl+Y)">‚Ü∑</button>
                        <button class="toolbar-btn" data-command="removeFormat" title="Supprimer le formatage">‚úñ</button>
                        <button class="toolbar-btn" id="sourceBtn" title="Voir le code HTML">&lt;/&gt;</button>
                    </div>

                    <!-- Zone d'√©dition -->
                    <div class="editor-area" id="editor" contenteditable="true">
                        <p>Commencez √† √©crire ou tapez / pour choisir un bloc</p>
                    </div>

                    <!-- Zone de sortie -->
                    <div class="status-message" id="statusMessage"></div>
                </div>
            </div>


        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <nav class="footer-nav">
                <a href="a-propos.html" class="footer-link">√Ä propos</a>
                <a href="contact.html" class="footer-link">Contact</a>
                <a href="auteur.html" class="footer-link">Scribes</a>
                <a href="mentions-legales.html" class="footer-link">Mentions l√©gales</a>
                <a href="accessibilite.html" class="footer-link footer-icon-link" aria-label="Accessibilit√©" title="Accessibilit√©">
                    <img src="../images/icons/accessibilite.png" alt="Ic√¥ne accessibilit√©" width="20" height="20">
                </a>
            </nav>
            <p class="footer-copyright">¬© 2025 Le Scribouill'art - Tous droits r√©serv√©s</p>
        </div>
    </footer>

    <script src="publication.js"></script>
    <script src="pwa.js"></script>
    <!-- YouTube IFrame Player API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        // Toggle sidebar sur mobile
        document.getElementById('sidebarToggleBtn').addEventListener('click', function() {
            var sidebar = document.querySelector('.sidebar');
            sidebar.classList.toggle('open');
        });

        // Lecteur YouTube cach√© (contr√¥l√© via le lecteur custom SoundCloud)
        var ytPlayer;
        function onYouTubeIframeAPIReady() {
            ytPlayer = new YT.Player('ytApiContainer', {
                height: '1',
                width: '1',
                videoId: 'jfKfPfyJRdk',
                playerVars: { autoplay: 0, controls: 0 },
                events: {
                    onStateChange: function(e) {
                        var playing = e.data === YT.PlayerState.PLAYING;
                        document.querySelector('.sc-icon-play').style.display = playing ? 'none' : 'block';
                        document.querySelector('.sc-icon-pause').style.display = playing ? 'block' : 'none';
                        document.getElementById('scBars').classList.toggle('playing', playing);
                    }
                }
            });
        }
        document.getElementById('scPlayBtn').addEventListener('click', function() {
            if (!ytPlayer || typeof ytPlayer.getPlayerState !== 'function') return;
            var state = ytPlayer.getPlayerState();
            if (state === YT.PlayerState.PLAYING) {
                ytPlayer.pauseVideo();
            } else {
                ytPlayer.playVideo();
            }
        });
        document.getElementById('scVolume').addEventListener('input', function() {
            if (ytPlayer && typeof ytPlayer.setVolume === 'function') ytPlayer.setVolume(parseInt(this.value));
        });
    </script>
</body>
</html>
